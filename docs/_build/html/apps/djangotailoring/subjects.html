
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>djangotailoring.subjects &mdash; djangotailoring v0.5 documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="djangotailoring v0.5 documentation" href="../../index.html" />
    <link rel="up" title="djangotailoring" href="index.html" />
    <link rel="next" title="djangotailoring.views" href="views/index.html" />
    <link rel="prev" title="djangotailoring.models" href="models.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="views/index.html" title="djangotailoring.views"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="models.html" title="djangotailoring.models"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">djangotailoring v0.5 documentation</a> &raquo;</li>
          <li><a href="../index.html" >The <tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">djangotailoring</span></tt> Applications</a> &raquo;</li>
          <li><a href="index.html" accesskey="U"><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">djangotailoring</span></tt></a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-djangotailoring.subjects">
<span id="djangotailoring-subjects"></span><h1><tt class="docutils literal"><span class="pre">djangotailoring.subjects</span></tt><a class="headerlink" href="#module-djangotailoring.subjects" title="Permalink to this headline">¶</a></h1>
<p>Part of <tt class="docutils literal"><span class="pre">djangotailoring</span></tt>’s core functionality is to load data from various
data sources and create <tt class="xref py py-class docutils literal"><span class="pre">tailoring2.Subject</span></tt> instances. Additional
applications may wish to reverse the process and store said subject instances
for later retrieval. This module handles both of these scenarios.</p>
<p>The functionality is broken down into three parts:</p>
<ul class="simple">
<li><a class="reference internal" href="#serialization-functions"><em>Serialization</em></a></li>
<li><a class="reference internal" href="#subject-loader-infrastructure"><em>Infrastructure</em></a></li>
<li><a class="reference internal" href="#built-in-loaders"><em>Built-in Subject Loaders</em></a></li>
</ul>
<div class="section" id="functions">
<span id="serialization-functions"></span><h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="djangotailoring.subjects.encode_subject">
<tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">encode_subject</tt><big>(</big><em>subject</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.encode_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>subject</strong> (<em>a tailoring2 Subject instance</em>) &#8211; the Subject to encode</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a JSON string</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a serialized string of the <tt class="docutils literal"><span class="pre">subject</span></tt>’s primary chars.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="djangotailoring.subjects.decode_subject">
<tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">decode_subject</tt><big>(</big><em>subject_data</em>, <em>project</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.decode_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>subject_data</strong> (<em>a JSON string of serialized Subject data</em>) &#8211; the data to decode into a Subject</li>
<li><strong>project</strong> (<em>a tailoring2.BaseProject instance</em>) &#8211; the Project class used to calculate the derived values.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">a tailoring2 Subject instance</p>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a fully constructed Subject object.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="djangotailoring.subjects.SubjectDoesNotExist">
<em class="property">exception </em><tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">SubjectDoesNotExist</tt><a class="headerlink" href="#djangotailoring.subjects.SubjectDoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that a subject for the ID requested is not available by the given
loader.</p>
</dd></dl>

</div>
<div class="section" id="subjectloader-interface">
<span id="subject-loader-infrastructure"></span><h2>SubjectLoader interface<a class="headerlink" href="#subjectloader-interface" title="Permalink to this headline">¶</a></h2>
<p>The subject loader interface is any object that has callables with the
following call signatures:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">empty_subject()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">all_subject_ids()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">subject_exists(subjectid)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">get_subject(subjectid)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">store_subject(subjectid,</span> <span class="pre">subject)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">delete_subject(subjectid)</span></tt></li>
</ul>
</div></blockquote>
<p>Djangotailoring requires that at least <tt class="docutils literal"><span class="pre">empty_subject</span></tt>, and <tt class="docutils literal"><span class="pre">get_subject</span></tt>
are implemented. If your application modifies subjects, you must implement
<tt class="docutils literal"><span class="pre">store_subject</span></tt> as well. All unimplemented features should raise
<tt class="xref py py-exc docutils literal"><span class="pre">NotImplementedError</span></tt>.</p>
<dl class="class">
<dt id="djangotailoring.subjects.SubjectLoader">
<em class="property">class </em><tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">SubjectLoader</tt><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.empty_subject">
<em class="property">classmethod </em><tt class="descname">empty_subject</tt><big>(</big><em>cls</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.empty_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a tailoring2 Subject instance</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a new Subject instance that was built with no input data.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.all_subject_ids">
<em class="property">classmethod </em><tt class="descname">all_subject_ids</tt><big>(</big><em>cls</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.all_subject_ids" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a list of strings</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a list of all ids that this subject loader can successfully
produce when calling <a class="reference internal" href="#djangotailoring.subjects.SubjectLoader.get_subject" title="djangotailoring.subjects.SubjectLoader.get_subject"><tt class="xref py py-meth docutils literal"><span class="pre">get_subject()</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.subject_exists">
<em class="property">classmethod </em><tt class="descname">subject_exists</tt><big>(</big><em>cls</em>, <em>userid</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.subject_exists" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>userid</strong> (<em>a string</em>) &#8211; a string identifying a subject</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a boolean</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if a subject is available for loading, otherwise False.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.get_subject">
<em class="property">classmethod </em><tt class="descname">get_subject</tt><big>(</big><em>cls</em>, <em>userid</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.get_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>userid</strong> (<em>a string</em>) &#8211; a string identifying a subject</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a tailoring2 Subject instance</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a Subject built with data values for the given userid</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#djangotailoring.subjects.SubjectDoesNotExist" title="djangotailoring.subjects.SubjectDoesNotExist"><tt class="xref py py-exc docutils literal"><span class="pre">SubjectDoesNotExist</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.store_subject">
<em class="property">classmethod </em><tt class="descname">store_subject</tt><big>(</big><em>cls</em>, <em>userid</em>, <em>subject</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.store_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>userid</strong> (<em>a string</em>) &#8211; a string identifying a subject</li>
<li><strong>subject</strong> (<em>a tailoring2 Subject instance</em>) &#8211; the Subject to store</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The given Subject should be stored in a format that can later be loaded
by the same SubjectLoader object. The only promise is that the
primary characteristics of the Subject be stored.</p>
<p>If a subject exists, it will be overwritten with the latest subject data.
If the subject does not exist, a new subject will be created with the
given subject’s data.</p>
</dd></dl>

<dl class="classmethod">
<dt id="djangotailoring.subjects.SubjectLoader.delete_subject">
<em class="property">classmethod </em><tt class="descname">delete_subject</tt><big>(</big><em>cls</em>, <em>userid</em><big>)</big><a class="headerlink" href="#djangotailoring.subjects.SubjectLoader.delete_subject" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>userid</strong> (<em>a string</em>) &#8211; a string identifying a subject</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="#djangotailoring.subjects.SubjectDoesNotExist" title="djangotailoring.subjects.SubjectDoesNotExist"><tt class="xref py py-exc docutils literal"><span class="pre">SubjectDoesNotExist</span></tt></a></td>
</tr>
</tbody>
</table>
<p>Removes a subject from the data store such that a subsequent call to
<a class="reference internal" href="#djangotailoring.subjects.SubjectLoader.get_subject" title="djangotailoring.subjects.SubjectLoader.get_subject"><tt class="xref py py-meth docutils literal"><span class="pre">get_subject()</span></tt></a> raises <a class="reference internal" href="#djangotailoring.subjects.SubjectDoesNotExist" title="djangotailoring.subjects.SubjectDoesNotExist"><tt class="xref py py-exc docutils literal"><span class="pre">SubjectDoesNotExist</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="built-in-subject-loaders">
<span id="built-in-loaders"></span><h2>Built-in Subject Loaders<a class="headerlink" href="#built-in-subject-loaders" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="djangotailoring.subjects.SerializedSubjectLoader">
<em class="property">class </em><tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">SerializedSubjectLoader</tt><a class="headerlink" href="#djangotailoring.subjects.SerializedSubjectLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of <a class="reference internal" href="#djangotailoring.subjects.SubjectLoader" title="djangotailoring.subjects.SubjectLoader"><tt class="xref py py-class docutils literal"><span class="pre">SubjectLoader</span></tt></a> that implements the complete interface.
Subjects are stored and accessed as objects of
<a class="reference internal" href="models.html#djangotailoring.models.SerializedSubjectData" title="djangotailoring.models.SerializedSubjectData"><tt class="xref py py-class docutils literal"><span class="pre">djangotailoring.models.SerializedSubjectData</span></tt></a>.</p>
<p>There is one attribute used by the class:</p>
<dl class="attribute">
<dt id="djangotailoring.subjects.SerializedSubjectLoader.project">
<tt class="descname">project</tt><a class="headerlink" href="#djangotailoring.subjects.SerializedSubjectLoader.project" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to the project instance that this loader will use when
decoding subjects.  The default is the project returned by
<a class="reference internal" href="project.html#djangotailoring.project.getproject" title="djangotailoring.project.getproject"><tt class="xref py py-func docutils literal"><span class="pre">djangotailoring.project.getproject()</span></tt></a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="djangotailoring.subjects.DjangoSubjectLoader">
<em class="property">class </em><tt class="descclassname">djangotailoring.subjects.</tt><tt class="descname">DjangoSubjectLoader</tt><a class="headerlink" href="#djangotailoring.subjects.DjangoSubjectLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>A subclass of <a class="reference internal" href="#djangotailoring.subjects.SubjectLoader" title="djangotailoring.subjects.SubjectLoader"><tt class="xref py py-class docutils literal"><span class="pre">SubjectLoader</span></tt></a> that implements the complete interface.
Subject data is stored in one or more instances of
<a class="reference internal" href="models.html#djangotailoring.models.SubjectData" title="djangotailoring.models.SubjectData"><tt class="xref py py-class docutils literal"><span class="pre">djangotailoring.models.SubjectData</span></tt></a> as wide-tables. Clients should
subclass this and modify <a class="reference internal" href="#djangotailoring.subjects.DjangoSubjectLoader.sources" title="djangotailoring.subjects.DjangoSubjectLoader.sources"><tt class="xref py py-attr docutils literal"><span class="pre">sources</span></tt></a> as necessary for their project.
As a convenience, a Django management command, <a class="reference internal" href="managementcommands.html#makemtsmodels-command"><em>makemtsmodels</em></a>,
will automatically build the skeleton of these model subclasses for the
active tailoring2 dictionary.</p>
<dl class="attribute">
<dt id="djangotailoring.subjects.DjangoSubjectLoader.sources">
<tt class="descname">sources</tt><a class="headerlink" href="#djangotailoring.subjects.DjangoSubjectLoader.sources" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary mapping source names to
<a class="reference internal" href="models.html#djangotailoring.models.SubjectData" title="djangotailoring.models.SubjectData"><tt class="xref py py-class docutils literal"><span class="pre">djangotailoring.models.SubjectData</span></tt></a> subclasses. When
<tt class="xref py py-meth docutils literal"><span class="pre">get_subject()</span></tt> is called, a query is made looking for user data in
each source data model type. If an object is found, its fields and values
will be used to generate the characteristics for the associated source.</p>
<p>For multi-value characteristics, the loader expects there to be a set of
NullBoolean fields, one for each possible value of the characteristic.
They are named as <tt class="docutils literal"><span class="pre">&lt;characteristic</span> <span class="pre">name&gt;__&lt;value</span> <span class="pre">name&gt;</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="djangotailoring.subjects.DjangoSubjectLoader.project">
<tt class="descname">project</tt><a class="headerlink" href="#djangotailoring.subjects.DjangoSubjectLoader.project" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to the project instance that this loader will use when
decoding subjects.  The default is the project returned by
<a class="reference internal" href="project.html#djangotailoring.project.getproject" title="djangotailoring.project.getproject"><tt class="xref py py-func docutils literal"><span class="pre">djangotailoring.project.getproject()</span></tt></a></p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">djangotailoring.subjects</span></tt></a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
<li><a class="reference internal" href="#subjectloader-interface">SubjectLoader interface</a></li>
<li><a class="reference internal" href="#built-in-subject-loaders">Built-in Subject Loaders</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="models.html"
                        title="previous chapter"><tt class="docutils literal docutils literal docutils literal"><span class="pre">djangotailoring.models</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="views/index.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">djangotailoring.views</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/apps/djangotailoring/subjects.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="views/index.html" title="djangotailoring.views"
             >next</a> |</li>
        <li class="right" >
          <a href="models.html" title="djangotailoring.models"
             >previous</a> |</li>
        <li><a href="../../index.html">djangotailoring v0.5 documentation</a> &raquo;</li>
          <li><a href="../index.html" >The <tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">djangotailoring</span></tt> Applications</a> &raquo;</li>
          <li><a href="index.html" ><tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">djangotailoring</span></tt></a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Dennis O’Reilly.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>